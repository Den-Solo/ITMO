Используем стек (на массиве).
Моделируем ситуацию.
При первом считывании номера x заполняем его от 1 до (x - 1). max = x
Далее:
1)если стек не пуст
1.1) и следующее считанное число равно числу на вершине, то уменьшаем размер стека (pop())
1.2) и новое значение х больше числа на вершине, то  накидываем на стек номера от (max + 1) до (х - 1). max = x
1.3) первый два не выполнились - ошибка
2) если стек пуст
2.1) считанное х > max,накидываем на стек номера от (max + 1) до (х - 1). max = x
2.2) иначе - ошибка