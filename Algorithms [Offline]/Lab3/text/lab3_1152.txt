Позиций в круге максимум 20, поэтому можно использовать битовую маску для хранения позиций балкончиков. (Если существует 0, уничтожен = 1)

Функция GetDmg принимает на вход маску и количество оставшихся монстров и возвращается минимальный урон, полученный при данной маске.
 Для каждой из n позиций уничтожаются 3 подряд идущих балконичка (индексы по модулю n), то есть изменяется маска и уменьшается число оставшихся монстров. С новой маской и количеством монстров функция вызывается рекурсивно. Искомый результат будет минимумом из всех результатов рекурсивно вызванной функции. 

Функция вызывается с пустой маской (все цели существуют и полной суммой монстров). Функция подсчитывает урон при данной маске (сначала стреляют монстры, потом герой), но по условию, герой стреляет первым, поэтому из итогового результата надо вычесть исходное число монстров.

В процессе вычисления урон (количество монстров) при данной маске записывается в массив hits, а минимальный урон при данной маске в массив saved_dmg)