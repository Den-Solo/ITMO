P[i, j] - таблица вероятностей полного израсходования i ракет из после j пусков.

вероятность пуска ракеты с отрезка длины 1 == 1;

Реккурентная формула:
for (i = 2..N)
	for (j = 2..N)
		for k = [1..i]
		P[i, j] += 1/i * P[i - k, j - 1] * P[k - 1, j - 1] 
1/i - нормирующий множитель для усреднения (мат. ож.)
P[i - k, j - 1] - вероятность запуска i - k ракет на предыдущем шаге, 
P[k - 1, j - 1] - вероятность запуска k - 1 ракет на предыдущем шаге,

k - является разделителем цельного отрезка на две части, с каждой из которых на j - 1 шаге совершается пуск.
в цикле первый индекс в P[,] принимает все значения от 0 до i в обоих членах произведения. Таким образом учитываются все возможные разбиения отрезка и вероятности пуска с них. Мы ищем мат. ож., поэтому нам нужно просуммировать все эти вероятности, умноженные на нормирующий множитель - 1/(длина отрезка).

Если количество пусков больше или равно количеству ракет, то эти ракеты с вероятностью 1 будут выпущены.