Прим. Все индексы в коде сдвинуты на 1 влево
1) Находим поиском в глубину самую удаленную вершину f1 из любой (по умолчанию 0-я)
2) От этой вершины поиском в глубину находим самую глубокую вершину f2
Т. о. знаем 2 максимально удаленные друг от друга вершины их расстояние между ними.
3) Из каждой из этих вершин строим  2 дерева. Кроме массива непосредственных родителей находим 2^ith родителей для метода двоичного подъема.
4) Теперь считываем запросы (vert_q, len_q). Берем номер новой вершины и пробуем поднять ее на len_q уровней в дереве с корнем f1, если не получается, поднимаем ее в дереве с корнем f2. Если и тут не вышло - вершины - нет, иначе выводим вершину, до которой удалось подняться. 