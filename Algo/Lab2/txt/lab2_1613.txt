Заносим в массив пары из количества пассажиров и номера города. Сортируем устойчивой сортировкой диапазон по кол-ву пассажиров.
На каждый запрос двоичным поиском определяем наличие указанного количества пассажиров и города в нужном диапазоне. (Ищем нижнюю границу для запроса кол-ва и левого индекса города)